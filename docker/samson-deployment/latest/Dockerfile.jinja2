{{ docker.from("samson", user="zendesk") }}

{{ docker.version() }}


###############################################################################
# Bootstrap
###############################################################################

{{ environment.lang() }}

{{ docker.add('baselayout.tar', '/') }}

{{ bootstrap.debian('jessie') }}

###############################################################################
# Base
###############################################################################

{{ environment.homePath() }}

{{ docker.copy('conf/', '/opt/docker/') }}

{{ base.debian() }}

###############################################################################
# Base-app
###############################################################################

{{ environment.app() }}

{{ baseapp.debian() }}

###############################################################################
# Samson
###############################################################################

{{ samsonDeployment.general() }}

{{ docker.expose('80') }}

{{ docker.entrypoint("/opt/docker/bin/entrypoint.sh") }}
{{ docker.cmd("supervisord") }}
